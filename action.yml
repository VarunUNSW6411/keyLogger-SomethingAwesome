name: 'Dyno CLI'
description: 'Interact with Dyno'
runs:
  using: "composite"
  steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-go@v3
      with:
        go-version: '>=1.17.0'
    - name: Get OS and arch info
      run: |
        GOOSARCH='linux/amd64'
        GOOS=${GOOSARCH%/*}
        GOARCH=${GOOSARCH#*/}
        echo "BINARY_NAME=dyno" >> $GITHUB_ENV
        echo "GOOS=$GOOS" >> $GITHUB_ENV
        echo "GOARCH=$GOARCH" >> $GITHUB_ENV
      shell: bash
    - name: Build
      run: |
        go build -o dyno main.go
        ./dyno -h
      shell: bash
    - name: Release
      uses: softprops/action-gh-release@v1
      with:
        files: ${{env.BINARY_NAME}}
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  
